(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{141:function(e,t,n){"use strict";n.r(t),n.d(t,"CPIQuery",function(){return y});var a=n(202),r=n.n(a),i=(n(235),n(237),n(78),n(54),n(239),n(241),n(245),n(34),n(7)),o=n.n(i),c=(n(247),n(0)),s=n.n(c),l=n(225),u=n(248),d=n(319),m=(n(307),n(308),n(226)),p=n(168),g=n(161),f=d.a.Handle,h=function(e){function t(t){var n;(n=e.call(this,t)||this).changePeriod=function(e){n.setState({period:n.getPeriod(e)})},n.state={};var a=n.props.data.allCpiCsv.edges;return a=(a=a.map(function(e){var t={};return e=e.node,t.period=u.DateTime.fromFormat(e.REF_DATE,"MMMyyyy").toFormat("yyyy-MMM"),t.category=e.Products_and_product_groups,t.value=e.Percent_Change,t.region=e.GEO,t})).reduce(function(e,t){var n;e[t.period]=Object.assign({},e[t.period]);var a=e[t.period];return a.Legend={Canada:"Canada",Alberta:"Alberta"},a[t.category]=Object.assign(((n={})[t.region]=Number.parseFloat(t.value),n),a[t.category]),e},{}),n.data=a,n.numPeriods=Object.keys(a).length,n.state.period=n.getPeriod(n.numPeriods-1),n.max=n.props.data.allCpiCsv.edges.reduce(function(e,t){return Math.max(e,Math.abs(t.node.Percent_Change))},-1/0),n}o()(t,e);var n=t.prototype;return n.getPeriod=function(e){return Object.entries(this.data)[e]},n.componentDidMount=function(){this.svg=l.d("#cpi").append("svg"),window.addEventListener("resize",this.componentDidUpdate.bind(this)),this.componentDidUpdate()},n.componentWillUnmount=function(){window.removeEventListener("resize",this.componentDidUpdate.bind(this))},n.componentDidUpdate=function(){var e=document.getElementById("cpi").offsetWidth,t=59.5*Object.keys(Object.entries(this.state.period[1])).length,n=l.c([-this.max-2,this.max+2],[0,e]);this.svg.attr("width",e).attr("height",t);var a=this.svg.selectAll("g.category").data(Object.entries(this.state.period[1])),r=a.enter().append("g");r.append("text").attr("class","categoryLabel").text(function(e){return e[0]}).attr("dy",-3).attr("text-anchor","middle");var i=(a=a.merge(r).attr("class",function(e){return"category"}).attr("transform",function(e,t){return"translate("+n(0)+","+(59.5*t+20)+")"})).selectAll("g.region").data(function(e){return Object.entries(e[1])}),o=i.enter().append("g").attr("class",function(e){return e[0]+" region"}).attr("transform",function(e,t){return"translate(0, "+17*t+")"});o.append("rect").attr("y",0).attr("height",17),o.append("text").attr("class","regionValueLabel").attr("alignment-baseline","middle").attr("dy",8.5);var c=i.merge(o);function s(e){return"string"==typeof e[1]}c.select("rect").attr("x",function(e){return s(e)?-8.5:Math.min(0,n(e[1])-n(0))}).attr("width",function(e){return s(e)?17:Math.abs(n(0)-n(e[1]))}),c.select("text").attr("text-anchor",function(e){return e[1]<0?"end":"start"}).attr("dx",function(e){return s(e)?11.5:n(e[1])-n(0)+3*Math.sign(e[1]-0)}).text(function(e){return""+e[1]}),i.exit().remove(),a.exit().remove()},n.render=function(){var e=this;return s.a.createElement(p.a,null,s.a.createElement(g.a,{title:"CPI"}),s.a.createElement("ul",null,s.a.createElement("li",null,"Adapted from the ",s.a.createElement("a",{href:"https://open.alberta.ca/dataset/443b43de-b8c0-4108-9aab-bde7df7532ed"},"Alberta Official Statistics Consumer Price Index.")),s.a.createElement("li",null,"Automatically updates with a single command."),s.a.createElement("li",null,"Fully mobile accessible."),s.a.createElement("li",null,"Groups category labels and bars together to reduce the eye movement required to connect them."),s.a.createElement("li",null,"This visualization does not consider the weight of each CPI component. As such, a similar per cent change in two CPI components could have very different impacts on overall CPI. It may be worth exploring designs that visualize this more effectively."),s.a.createElement("li",null,"Use the slider to change the period.")),s.a.createElement("h2",null,"Consumer Price Index, Year-Over-Year Percentage Change"),s.a.createElement("h3",null,u.DateTime.fromFormat(this.state.period[0],"yyyy-MMM").toFormat("MMMM yyyy")),s.a.createElement(d.a,{min:0,max:this.numPeriods-1,trackStyle:{backgroundColor:"lightgrey"},railStyle:{backgroundColor:"lightgrey"},defaultValue:this.numPeriods-1,handle:function(t){var n=t.value,a=(t.dragging,t.index),i=r()(t,["value","dragging","index"]);return s.a.createElement(m.a,{prefixCls:"rc-slider-tooltip",overlay:e.getPeriod(n)[0],visible:!0,placement:"top",key:a},s.a.createElement(f,Object.assign({value:n},i)))},onChange:this.changePeriod}),s.a.createElement("div",{id:"cpi"}))},t}(c.Component);t.default=h;var y="136371961"},146:function(e,t,n){"use strict";n.r(t),n.d(t,"graphql",function(){return g}),n.d(t,"StaticQueryContext",function(){return m}),n.d(t,"StaticQuery",function(){return p});var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=n(145),s=n.n(c);n.d(t,"Link",function(){return s.a}),n.d(t,"withPrefix",function(){return c.withPrefix}),n.d(t,"navigate",function(){return c.navigate}),n.d(t,"push",function(){return c.push}),n.d(t,"replace",function(){return c.replace}),n.d(t,"navigateTo",function(){return c.navigateTo});var l=n(152),u=n.n(l);n.d(t,"PageRenderer",function(){return u.a});var d=n(33);n.d(t,"parsePath",function(){return d.a});var m=r.a.createContext({}),p=function(e){return r.a.createElement(m.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function g(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}},152:function(e,t,n){var a;e.exports=(a=n(159))&&a.default||a},158:function(e){e.exports={data:{site:{siteMetadata:{title:"Alberta un-Official Statistics"}}}}},159:function(e,t,n){"use strict";n.r(t);n(34);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=n(53),s=n(2),l=function(e){var t=e.location,n=s.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(c.a,Object.assign({location:t,pageResources:n},n.json))};l.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=l},160:function(e,t,n){},161:function(e,t,n){"use strict";var a=n(162),r=n(0),i=n.n(r),o=n(4),c=n.n(o),s=n(180),l=n.n(s),u=n(146);function d(e){var t=e.description,n=e.lang,r=e.meta,o=e.keywords,c=e.title;return i.a.createElement(u.StaticQuery,{query:m,render:function(e){var a=t||e.site.siteMetadata.description;return i.a.createElement(l.a,{htmlAttributes:{lang:n},title:c,titleTemplate:"%s | "+e.site.siteMetadata.title,meta:[{name:"description",content:a},{property:"og:title",content:c},{property:"og:description",content:a},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:e.site.siteMetadata.author},{name:"twitter:title",content:c},{name:"twitter:description",content:a}].concat(o.length>0?{name:"keywords",content:o.join(", ")}:[]).concat(r)})},data:a})}d.defaultProps={lang:"en",meta:[],keywords:[]},d.propTypes={description:c.a.string,lang:c.a.string,meta:c.a.array,keywords:c.a.arrayOf(c.a.string),title:c.a.string.isRequired},t.a=d;var m="1025518380"},162:function(e){e.exports={data:{site:{siteMetadata:{title:"Alberta un-Official Statistics",description:"Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.",author:"@gatsbyjs"}}}}},168:function(e,t,n){"use strict";var a=n(158),r=n(0),i=n.n(r),o=n(4),c=n.n(o),s=n(146),l=n(179),u=n.n(l),d=function(e){e.siteTitle;return i.a.createElement("div",{style:{marginBottom:"1.45rem"}},i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},i.a.createElement("h1",{style:{margin:0,fontFamily:"Arial",fontWeight:100}},i.a.createElement(s.Link,{style:{textDecoration:"none",color:"inherit"},to:"/"},"Alberta ",i.a.createElement("span",{style:{color:"#ff7900"}},"un-"),i.a.createElement("span",{style:{color:"#00aad2"}},"Official Statistics")))))};d.propTypes={siteTitle:c.a.string},d.defaultProps={siteTitle:""};var m=d,p=(n(160),function(e){var t=e.children;return i.a.createElement(s.StaticQuery,{query:"755544856",render:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{href:"//www.github.com/jczerwinski/alberta-unofficial-statistics",color:"black",target:"_blank",position:"right"},"Fork me on GitHub"),i.a.createElement(m,{siteTitle:e.site.siteMetadata.title}),i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))},data:a})});p.propTypes={children:c.a.node.isRequired};t.a=p},247:function(e,t,n){},304:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=304}}]);
//# sourceMappingURL=component---src-pages-cpi-js-562c6d8407a2c95000b8.js.map